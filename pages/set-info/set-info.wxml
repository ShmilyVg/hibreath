<view class="guidance" wx:if="{{!finishedGuide}}">
  <view class="firstPage">
    <image src="../../images/guidance/rztb.png" class="guidanceBg"></image>
    <view class="header_h2 text_left">Hi,欢迎来到Silmple</view>
    <view class="header_text text_left">接下来花点时间，为您定制专属的减脂方案</view>
  </view>
  <view class="btn_group">
    <button class="bottom-btn whiteBtn" open-type="getUserInfo" bindgetuserinfo="onGetUserInfoEvent" hover-class="press-style" hover-stay-time="50">定制专属减脂方案 </button>
  </view>
</view>
<view class="set-info" wx:if="{{finishedGuide}}">
  <view class="set-top-view">
    <view class="set-info-top">天天燃脂有好礼</view>
    <view class="tasks">
      <view class="task {{item.isFinished ?'readyClock':'' }}" wx:for="{{breathSign.data}}" wx:key='executeOrder'>
      <view class="replenish-tip" wx:if="{{item.executeOrder < breathSign.days && !item.isFinished}}">补</view>
        <image src="../../images/set-info/ready.png" class="" mode="aspectFill" wx:if="{{item.isFinished && !item.isCoupon}}"></image>
        <image src="../../images/set-info/{{!item.isCoupon?'task':item.isTakeCoupon?'gift-open':'gift'}}.png" mode="aspectFill" wx:else></image>
        <view>{{item.executeOrder}}天</view>
      </view>
    </view>
    <view animation="{{animationTop}}" class="clock-con">
      <view class="clock-tip">
        <view wx:if="{{breathSign.days == 1 && !breathSign.isFinished}}"></view>
        <view class="clock-day" wx:else="{{breathSign.days}}">Day{{breathSign.days}}
          <text>·{{breathSign.isFinished?'已打卡':'未完成'}}</text> </view>
        <view class="clock-text">连续7日打卡，可领取
          <text>3日代餐超值优惠券</text>，让燃脂不停歇</view>
      </view>
      <view class="clockBtn">
        <view wx:if="{{!breathSign.isFinished}}" catchtap="fatTaskToFinish">
          开始燃脂打卡
          <image src="../../images/set-info/right-3.png" class="goNext"></image>
        </view>
        <button wx:elif="{{breathSign.isFinished && breathSign.replenish}}" open-type='share'>
          补签得好礼
          <image src="../../images/set-info/right-3.png" class="goNext"></image>
        </button>
        <view wx:elif="{{breathSign.days && !breathSign.replenish && !breathSign.isCoupon}}" catchtap="fatTaskToFinish">
          继续燃脂打卡
          <image src="../../images/set-info/right-3.png" class="goNext"></image>
        </view>
        <view class="replenish" catchtap="goToGetGift" wx:elif="{{breathSign.isFinished && breathSign.isCoupon&& !breathSign.replenish}}">
          <image src="../../images/set-info/gift.png" class="gift"></image>
          领取{{breathSign.days == 3?'首次':''}}大礼
          <image src="../../images/set-info/goRight.png" class="goNext"></image>
        </view>
        <text class="clockBtnTip">使用燃脂精灵并上传燃脂数据即可签到成功</text>
      </view>
    </view>

  </view>

  <view class="contain">
    <image class="step" src="../../images/set-info/step.png" bindtap="showTopTask"></image>
    <view class="contain-top">
      <view class="contain-title" wx:if="{{taskInfo.dayNum}}">你已坚持低碳燃脂{{taskInfo.dayNum}}天</view>
      <view class="contain-title" wx:if="{{!taskInfo.dayNum}}">开启你的低碳燃脂之旅</view>
      <view class="burn-ready">
        <block wx:for="{{taskInfo.otherUsers.imgUrls}}" wx:key='item'>
          <image src="{{item}}" style="z-index:{{100-index}}"></image>
        </block>
        <text style="margin-left: {{burnReadyLeft}}rpx;">今日{{taskInfo.otherUsers.dayNum}}人·正在燃脂</text>
      </view>
      <!-- <view class="burn-about" wx:if="{{taskInfo.dayNum}}">
        <view class="stage">{{taskInfo.stateDay}}
          <text>· {{taskInfo.stateTitle}}</text> </view>
        <view class="speed" wx:if="{{taskInfo.fatTask.dataValue}}">{{taskInfo.fatTask.dataValue}}
          <text>· {{taskInfo.fatTask.dataDesc}}</text> </view>
      </view> -->
    </view>
    <view class="puzzled" bindtap="goToAddLowfat">
      <text class="puzzled-title">减脂过程中有困惑？</text>
      <text class="puzzled-text">点击加入Slimple减脂群，在线营养师专业解答</text>
      <image src="../../images/set-info/puzzled.png"></image>
    </view>
    <view class="task-day">
      <view class="task-day-title">今日任务</view>
      <view class="task-card ">
        <view class="speed-now" bindtap="goToFatResultPage">
          <view class="item-tip">
            <image src="../../images/set-info/{{taskInfo.fatTask.finished?'speed-tip1':'speed-tip'}}.png" class="speed-tip"></image>
          </view>
          <image src="../../images/set-info/speed-bg.png" class="item"></image>
          <view class="item-contain">
            <view class="item-contain-tit">当前燃脂速度</view>
            <view class="item-contain-tit-en">FAT BURNING SPEED</view>
            <view class="item-contain-r" wx:if="{{taskInfo.fatTask.finished}}">{{taskInfo.fatTask.dataValue}}
              <view> {{taskInfo.fatTask.dataDesc}}</view>
            </view>
            <view class="item-contain-n" wx:if="{{!taskInfo.fatTask.finished}}" catchtap="fatTaskToFinish">
              <view>去完成</view>
            </view>
          </view>
        </view>
        <view class="weigth-now" bindtap="bindTapToFood">
          <view class="item-tip">
            <image src="../../images/set-info/{{taskInfo.weightTask.finished?'weight-tip1':'weight-tip'}}.png" class="weigth-tip"></image>
          </view>
          <image src="../../images/set-info/weight-bg.png" class="item"></image>
          <view class="item-contain">
            <view class="item-contain-tit">当前体重(kg)</view>
            <view class="item-contain-tit-en">MEASURE WEIGHT</view>
            <view class="item-contain-r" wx:if="{{taskInfo.weightTask.finished}}">{{taskInfo.weightTask.dataValue}}
              <view wx:if="{{taskInfo.weightTask.thanValue}}">
                比上一次
                <image src="../../images/set-info/{{taskInfo.weightTask.thanValue >0?'shareDown':'shareUp'}}.png"></image>
                {{taskInfo.weightTask.thanValue}}
              </view>
              <view>kg</view>
            </view>
            <view class="item-contain-n" catchtap="showModal" wx:if="{{!taskInfo.weightTask.finished}}">
              <view class="item-contain-n-weight">去完成</view>
            </view>
          </view>
        </view>
      </view>
    </view>
    <view class="today-result" bindtap="goToLowFatReport">
      <image src="../../images/set-info/today-result.png"></image>
      <view class="today-result-tit">今日减脂效果如何？</view>
      <view class="today-result-text" wx:if="{{taskInfo.fatTask.finished && taskInfo.weightTask.finished}}">报告已解锁·点击查看</view>
      <view class="today-result-text" wx:else>完成今日任务·解锁总结报告</view>
    </view>
    <view class="bigTruth">
      <view class="bigTruthTit">
        <text>#减脂大实话#</text>
        <image src="../../images/set-info/rjjx.png" class="rjjx"></image>
      </view>
      <view class="bigTruthCon">{{answerData.answerDatabaseBean.tips}}</view>
      <view class="btnCon" wx:if="{{answerData.isAnswer == 0}}">
        <view bindtap="answerFinish" wx:for="{{answerBtns}}" wx:key='imgSrc' data-index="{{index}}">
          <image src='{{item.imgSrc}}'></image>
          <text>{{item.text}}</text>
        </view>
      </view>
      <view class="answerCon" wx:else>
        <view class="answerTit answerRight" wx:if="{{answerData.isCorrect == 1}}">
          <image class="answerImg" src="../../images/set-info/right.png"></image>
          <text>答对啦！</text>
        </view>
        <view class="answerTit answerError" wx:else>
          <image class="answerImg " src="../../images/set-info/error.png"></image>
          <text>答错啦...</text>
        </view>
        <view class="answerDetails">
          <view class="answerResult">正确答案：{{answerData.answerDatabaseBean.standardAnswer?'Yes':'NO'}}</view>
          <view>{{answerData.answerDatabaseBean.explanation}}</view>
        </view>
        <view class="answerRecord">已答对{{answerData.correctCount}}题 · 答题正确率
          <text>{{answerData.correctRate}}%</text>
        </view>
      </view>
    </view>
  </view>
</view>
<!--燃脂&体重情况弹窗-->
<fat-window wx:if="{{showWindows}}"
            bind:closeWindow="closeWindow"
            bind:weightGoal="weightGoal"
            modalList="{{taskInfo.modalList}}">

</fat-window>
<!--非首次打卡完成toast弹窗-->
<my-toast wx:if="{{showMytoast}}" toastType="{{toastType}}" integral="{{integral}}" inTaskProgress="{{inTaskProgress}}" integralTaskTitle="{{integralTaskTitle}}">
</my-toast>
<!--首次打卡完成激励弹窗-->
<exciting-window wx:if="{{showExcitation}}" bind:getShowExcitation="getShowExcitation" toastType="{{toastType}}" toastResult="{{toastResult}}">
</exciting-window>


<!--体重底部弹窗-->
<view class="modals modals-bottom-dialog" hidden="{{hideModal}}">
  <view class="modals-cancel" bindtap="hideModal"></view>
  <view class="bottom-dialog-body bottom-pos" animation="{{animationData}}">
    <view class="weight-title"> <view bindtap="hideModal">取消</view> 请输入当前体重</view>
    <input class="weightInput " value="{{weight}}" bindinput="weightGoalChange" maxlength="5" type="digit" placeholder="体重" placeholder-class="placeholder" />
    <!-- <view class="page2-line"></view> -->
    <view class="unit">KG</view>
    <view class="weightBtn" hover-class="press-style" bindtap="saveWeight">保存</view>
  </view>
</view>

<view wx:if="{{showBigTip}}" class="flex-column">
  <view class="tip-full"></view>
  <view class="tip-view flex-column">
    <view class="tip-view-title">正在上传检测记录</view>
    <view class="tip-view-content">{{sync.num}}/{{sync.countNum}}</view>
  </view>
</view>

<!--底部弹窗-->
<view class="shareContainer" wx:if='{{isOpened}}'>
  <button class='shareRow' open-type='share' wx:key data-idx='{{index}}' bindtap='handClick'>分享给好友或群</button>
  <view class='shareRow margin-top' bindtap='cancel' style="font-size: 18px">取 消</view>
</view>
<view class='shareMask' wx:if='{{isOpened}}' bindtap='cancel'></view>

<!--体重达到目标弹窗-->
<!--
<weight-window wx:if="{{showWeight}}">

</weight-window>-->
