<!--pages/set-info/set-info.wxml-->
<import src="./view/goal.wxml"></import>
<import src="./view/guide.wxml"></import>
<import src="./view/fatBurnCard.wxml"></import>
<import src="./view/bodyIndexCard.wxml"></import>
<import src="./view/HIITCard.wxml"></import>
<view class="page" style="background-color: {{bgColorSetInfoPage}}">
    <block wx:if="{{showNewInfo}}">
        <view class="flex-column" wx:if="{{showGuide}}">
            <template is="guide"></template>
        </view>

        <view class="flex-column" wx:else>
            <view class="title">{{title[page-1]}}</view>
            <view class="num">{{page}}/8</view>

            <view class="flex-column" wx:if="{{page==1}}">
                <view class="flex-row">
                    <image class="page1-image" src="../../images/set-info/page1-up.png"></image>
                    <template is="goal" data="{{goals}}"></template>
                    <image class="page1-image" src="../../images/set-info/page1-down.png"></image>
                </view>
                <view class="page1-input-view flex-row">
                   <!-- <image wx:if="{{!info.goalDesc.length}}" class="page1-edit"
                           src="../../images/set-info/page1-edit.png"></image>-->
                    <input class="page1-input" value="{{info.goalDesc}}" placeholder="{{phValue}}" maxlength="10"
                           placeholder-class="placeholder-page1"  bindinput="bindInputGoal" bindfocus='onFocus' bindblur='onBlur'/>
                </view>

            </view>
            <view wx:elif="{{page==2}}" class="flex-row space-between" style="width: 610rpx">
                <view class="{{item.isChose?'card-chose':'card'}} flex-column" wx:for="{{sexBox}}" bindtap="bindTapSex"
                      data-index="{{index}}">
                    <image class="sex-image"
                           src="../../images/set-info/{{item.image}}{{item.isChose?'-select':''}}.png"></image>
                    <view class="sex-text" style="color:{{item.isChose?'#FF5E00':'#808080'}}">{{item.text}}</view>
                </view>
            </view>
            <block wx:elif="{{page==3}}">
                <picker mode="date" value="{{info.birthday}}" start="1890-01-01" end="{{currentDate}}"
                        bindchange="bindChangeBirth">
                    <view class="flex-row">
                        <view wx:for="{{birth}}" class="flex-column" style="width: 154rpx;margin: 0 33rpx">
                            <view class="page2-line" style="margin-top: 90rpx"></view>
                            <view class="page2-num" style="margin-top: 48rpx;font-size: 90rpx">{{item}}</view>
                            <view class="page2-line" style="margin-top: 15rpx"></view>
                        </view>
                    </view>
                </picker>
            </block>
            <view wx:elif="{{page==4}}" class="flex-row" style="width: 90%;margin-left: 10%">
                <view class="flex-column" style="width: 45%;margin-top: 60rpx;">
                    <input class="page2-num" value="{{info.height}}" bindinput="bindInputHeight" maxlength="3" type="number"
                           placeholder="身高" placeholder-class="placeholder"/>
                    <view class="page2-line"></view>
                    <view class="page2-kg">CM</view>
                </view>
                <view class="flex-column" style="width: 45%;margin-top: 60rpx;">
                    <input class="page2-num" value="{{info.weight}}" bindinput="bindInputWeight" maxlength="5" type="digit"
                           placeholder="体重" placeholder-class="placeholder"/>
                    <view class="page2-line"></view>
                    <view class="page2-kg">KG</view>
                </view>
            </view>
            <block wx:elif="{{page==5}}">
                <view wx:if="{{noMeasure}}" class="page4">
                    <view class="page4-item" wx:for="{{info.sex?page4MenItem:page4WomenItem}}"
                          bindtap="bindTapExactClick"
                          data-index="{{index}}">
                        <image src="http://backend.hipee.cn/assets/home/images/hb/{{info.sexStr}}{{index}}.png"></image>
                        <view wx:if="{{choseIndex!=index}}" class="page4-cover"
                              style="background-color: {{info.sex?'#0AC1A1':'#ED6F69'}}"></view>
                        <view class="page4-text">{{item}}%</view>
                    </view>
                    <view class="page6-small-text" bindtap='bindTapSwitchExact'>我测过准确的体脂率</view>
                </view>
                <view wx:else class="flex-column">
                    <input class="page2-num" placeholder="体脂率" maxlength="4" placeholder-class="placeholder" type="digit"
                           bindinput="bindInputExact" value="{{info.bodyFatRate}}"/>
                    <view class="page2-line"></view>
                    <view class="page2-kg">%</view>
                    <view class="page6-small-text" bindtap='bindTapSwitchExact'>没测过体脂率</view>
                </view>
            </block>
            <view wx:elif="{{page==6}}">
                <view wx:for="{{meals}}" class="page7-box {{item.isChose?'page7-box-chose':'page7-box-nor'}}"
                      bindtap="bindTapMeals" data-index="{{index}}">{{item.text}}
                </view>
            </view>
            <view wx:if="{{page==7}}" class="flex-column">
                <view class="page2-title">也可以自定义您的目标体重</view>
                <input class="page2-num" bindinput="bindInputWeightGoal" value="{{info.weightGoal}}" type="digit" maxlength="5"/>
                <view class="page2-line"></view>
                <view class="page2-kg">KG</view>
            </view>
            <view wx:if="{{page==8}}" style="width: 750rpx;">
                <scroll-view class="scroll" scroll-x scroll-left="{{scrollLeft}}rpx" bindscroll="bindScrollView" scroll-with-animation="true">
                    <view style="width: 1480rpx;padding: 0 130rpx">
                        <image wx:for="{{project}}" src="{{item.descUrl}}" class="scroll-image" bindtap="bindTapProject"
                               data-index="{{index}}"></image>
                    </view>
                </scroll-view>
            </view>
            <view class="{{page ==6?'btn-positionB':'btn-position'}} flex-column {{page ==8?'bottom-btnN':''}}">
                <block wx:if="{{page!=8}}">
                    <view class="bottom-btn" style="background-color: #ED6F69;color: #ffffff;" hover-class="press-style"
                          hover-stay-time="50" bindtap="continue">下一步
                    </view>
                    <view class="bottom-btn-back" hidden="{{page == 1}}" hover-class="press-style"
                          hover-stay-time="50" bindtap="back">返回
                    </view>
                </block>
                <block wx:else>
                    <view class="bottom-btn bottom-page8" style="background-color: #ED6F69;color: #ffffff;" hover-class="press-style"
                          hover-stay-time="50" bindtap="continue">开启正式的减脂历程
                    </view>
                </block>
            </view>
        </view>
    </block>
    <block wx:else>
        <view class="set-top-view flex-row">
            <view class="" style="align-items: start;margin-left: 50rpx;margin-top: -30rpx">
                <view class="set-top-title">{{indexgoalDesc}}</view>
                <view class="set-top-content" style="float: left">{{indexDayDesc}}</view>
                <view class="set-top-content" style="float: left">今日任务{{indexfinishNum}}/{{indextaskNum}}</view>
                <button class="set-top-contentS" style="float: left" open-type="share">
                    <image class="shareImg" src="../../images/set-info/shared.png"></image>
                    分享
                </button>
            </view>
            <view class="flex-column" style="margin-right: 31rpx">
               <!-- <view class="set-top-step">{{indexfinishNum}}/{{indextaskNum}}</view>
                <view class="set-top-today">今日任务</view>-->
                <setting bind:onSettingClickEvent="onCommunitySettingClickEvent"></setting>
            </view>
        </view>
        <view class="flex-column" style="margin-top: -65rpx">
            <view wx:for="{{taskListAll}}" wx:key="index">
                <template is="fatBurnCard" wx:if="{{item.type =='fatBurn'}}"  data="{{hiddenFat,fatBurnTask,fatText,fatTextEn,score,fatDes,bgColorSetInfoPage,fatType}}"></template>
                <template is="bodyIndexCard" wx:if="{{item.type =='bodyIndex'}}"  data="{{bodyIndexTask,bodyIndexExt}}"></template>
                <template is="HIITCard" wx:if="{{item.type =='sport'}}"  data="{{sportTask,sportExt,aheight,currentSwiper,hiddenImg,grayLeft,grayRight}}"></template>
                <foodCard wx:if="{{item.type =='food'}}"
                          class="countdown"
                               foodTask="{{foodTask}}"
                               foodExt="{{foodExt}}"
                               foodAheight="{{foodAheight}}"
                               foodHiddenImg="{{foodHiddenImg}}"
                               calorie="{{calorie}}"
                               carbohydrate="{{carbohydrate}}"
                               fat="{{fat}}"
                               protein="{{protein}}"
                               foodcurrentSwiper="{{foodcurrentSwiper}}"
                >

                </foodCard>
            </view>
           <!-- <template is="fatBurnCard" wx:if="{{isfatBurn}}" data="{{fatBurnTask,fatText,fatTextEn,score,fatDes,bgColorSetInfoPage,fatType}}"></template>
            <template is="bodyIndexCard" wx:if="{{isbodyIndex}}" data="{{bodyIndexTask,bodyIndexExt}}"></template>
            <template is="HIITCard" wx:if="{{isSport}}" data="{{sportTask,sportExt,aheight,currentSwiper,hiddenImg,grayLeft,grayRight}}"></template>-->
        </view>
    </block>
    <canvas style="width:{{windowWidth}}rpx;height:{{canvasHeight}}rpx;position: fixed;left: 300rpx;" canvas-id="myCanvas"></canvas>
</view>

<view wx:if="{{showBigTip}}" class="flex-column">
    <view class="tip-full"></view>
    <view class="tip-view flex-column">
        <view class="tip-view-title">正在上传检测记录</view>
        <view class="tip-view-content">{{sync.num}}/{{sync.countNum}}</view>
    </view>
</view>


<!--底部弹窗-->
<view class="commodity_screen" bindtap="hideModal" wx:if="{{showModalStatus}}"></view>
<view animation="{{animationData}}" class="commodity_attr_box" wx:if="{{showModalStatus}}">
<!--<view class="commodity_screen" bindtap="hideModal"></view>
<view animation="{{animationData}}" class="commodity_attr_box">-->
    <form bindsubmit='formSubmit'>
        <button  bindtap="hideModal" class="commodity_clear">取消</button>
       <!-- <view class="commodity_sub" bindtap="hideModal">确定</view>-->
        <button class="commodity_sub" form-type='submit'>提交</button>
        <view class="clear"></view>
        <view style="height: 20rpx;width:100%;border-bottom: 1px #F2F2F2 solid;margin-bottom: 35rpx"></view>
        <view style="margin-bottom: 40rpx">*您可以按照实际情况自由填写打卡</view>
        <view class="commodity_part">
            <view class="commodity_title">体重(kg)</view>
            <input class="commodity_input" placeholder-class="commodity_inputpla" bindinput="bindWeightInput"  maxlength="5"  name='weight' placeholder="请输入您的体重" type="digit"/>
            <view class="clear"></view>
        </view>
        <view class="commodity_part">
            <view class="commodity_title">高压(mmHg)</view>
            <input class="commodity_input" placeholder-class="commodity_inputpla" maxlength="3"  name='bloodHeight' placeholder="请输入您的高压" type="number"/>
            <view class="clear"></view>
        </view>
        <view class="commodity_part">
            <view class="commodity_title">低压(mmHg)</view>
            <input class="commodity_input" placeholder-class="commodity_inputpla" maxlength="3" name='bloodLow' placeholder="请输入您的低压" type="number"/>
            <view class="clear"></view>
        </view>
        <view>
            <view class="commodity_title">心率(BPM)</view>
            <input class="commodity_input" placeholder-class="commodity_inputpla" maxlength="3"  name='heart' placeholder="请输入您的心率" type="number"/>
            <view class="clear"></view>
        </view>
    </form>

</view>

<!--底部弹窗-->
